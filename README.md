# Sprint_7  
## API-автотесты сервиса Samokat

Проект содержит набор **API-автотестов** для проверки основных бизнес-сценариев сервиса **Samokat**  
https://qa-scooter.praktikum-services.ru/

Тесты написаны на языке **Python** с использованием фреймворка **pytest** и библиотеки **requests**.  
В проекте используется генерация тестовых данных через **Faker**, применяются фикстуры pytest и формируется отчётность в **Allure**.

Проверяются ключевые API-сценарии:

- Создание курьера  
- Авторизация курьера  
- Создание заказа  
- Получение списка заказов  

---

## Структура проекта

```
sprint_scooter_api/

tests/
├── test_create_courier.py   # тесты создания курьера
├── test_login_courier.py    # тесты авторизации курьера
├── test_create_order.py     # тесты создания заказа
└── test_order_list.py       # тесты получения списка заказов

utils/
├── helpers.py               # вспомогательные методы работы с API
├── order_data.py            # генерация тестовых данных заказа
└── urls.py                  # URL и эндпоинты API

conftest.py                  # фикстуры pytest
requirements.txt             # зависимости проекта
README.md
```

---

## Используемые технологии

- Python 3  
- pytest  
- requests  
- Faker  
- Allure Framework  

---

## Описание реализованных тестов

---

### Создание курьера (TestCreateCourier)

Проверяется ручка:

```
POST /api/v1/courier
```

Реализованные проверки:

- Успешное создание курьера (201)
- Ответ содержит `{"ok": true}`
- Нельзя создать двух одинаковых курьеров (409)
- Корректное сообщение при повторном логине
- Ошибка при отсутствии логина (400)
- Ошибка при отсутствии пароля (400)
- Проверка текста ошибки при недостаточных данных

Все тесты атомарные — каждый тест проверяет одно состояние системы.

---

### Авторизация курьера (TestLoginCourier)

Проверяется ручка:

```
POST /api/v1/courier/login
```

Реализованные проверки:

- Успешная авторизация (200)
- В ответе возвращается `id`
- Ошибка при неверном логине (404)
- Ошибка при неверном пароле (404)
- Ошибка при авторизации несуществующего пользователя (404)
- Ошибка при отсутствии логина (400)
- Ошибка при отсутствии пароля (400)
- Проверка текста ошибки `"Недостаточно данных для входа"`

---

### Создание заказа (TestCreateOrder)

Проверяется ручка:

```
POST /api/v1/orders
```

Тесты параметризованы.

Реализованные проверки:

- Можно указать цвет `BLACK`
- Можно указать цвет `GREY`
- Можно указать оба цвета
- Можно не передавать поле `color`
- Возвращается статус 201
- В ответе присутствует `track`

---

### Получение списка заказов (TestOrderList)

Проверяется ручка:

```
GET /api/v1/orders
```

Реализованные проверки:

- Успешное получение списка заказов (200)
- В ответе присутствует список `orders`
- Ошибка при передаче несуществующего `courierId` (404)
- Возвращается корректное сообщение об ошибке

---

## Фикстуры

В проекте используются pytest-фикстуры для:

- генерации данных курьера  
- создания курьера перед тестом  
- автоматического удаления курьера после выполнения теста  
- генерации тестовых данных заказа  

Фикстуры позволяют:

- изолировать тесты
- избежать зависимостей между тестами
- автоматически очищать тестовые данные

---

## Установка зависимостей

```bash
pip install -r requirements.txt
```

---

## Запуск тестов

```bash
pytest
```

---

## Генерация Allure-отчёта

### Запуск тестов с генерацией отчёта

```bash
pytest tests --alluredir=allure_results
```

### Просмотр отчёта

```bash
allure serve allure_results
```

В репозиторий добавляется только папка с результатами Allure:

---

## Особенности проекта

- Тесты написаны атомарно (один тест — одна проверка)
- Используется параметризация pytest
- Все тестовые данные генерируются динамически
- Реализована очистка тестовых данных после выполнения тестов# Sprint_7